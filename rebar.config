%% behaviours should be compiled before other files
{erl_first_files, ["src/veil_modules/worker_plugin_behaviour.erl"]}.

%% directory for releases
{sub_dirs, ["releases"]}.

%% options for documentation tool
{edoc_opts, [no_packages]}.

%% eunit opts - Maven-like output formatting
{eunit_opts, [verbose, {report, {eunit_surefire, [{dir, "../test/eunit_results"}]}}]}.

%% Test coverage
{cover_enabled, true}.

%% deps options
{deps, [
    {meck, ".*", {git, "https://github.com/eproxus/meck.git"}},
    {lager, ".*", {git, "git://github.com/basho/lager.git"}},
    {ranch, ".*", {git, "https://github.com/extend/ranch.git"}},
    {protobuffs, ".*", {git, "https://github.com/basho/erlang_protobuffs.git"}},
    {cowboy, ".*", {git, "git://github.com/extend/cowboy.git"}},
    {nitrogen_core, ".*", {git, "git://github.com/nitrogen/nitrogen_core.git"}},
    {nprocreg, ".*", {git, "git://github.com/nitrogen/nprocreg.git"}},
    {simple_bridge, ".*", {git, "git://github.com/nitrogen/simple_bridge.git"}},
    {mimetypes, ".*", {git, "git://github.com/spawngrid/mimetypes.git"}},
    {gen_server_mock, ".*", {git, "git://github.com/brucexin/gen_server_mock.git"}},
    {yamler, ".*", {git, "git://github.com/goertzenator/yamler.git"}}

]}.

%% pre-hooks
{pre_hooks, [
    {eunit, "mkdir -p test/eunit_results"}, %% Make dir for eunit' surefire test results
    {eunit, "epmd -daemon"} %% Sometimes, in some cases epmd daemon doesn't start during eunit tests, so we need to force start it
]}.

%% Cleanup
{clean_files, ["test/eunit_results", "distributed_tests_out"]}.

%% logging 
{erl_opts, [{parse_transform, lager_transform}]}.
