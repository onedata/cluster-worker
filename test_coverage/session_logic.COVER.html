<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>/home/piotrek/Dokumenty/OneData/merge_merge/op-worker/test_coverage/session_logic.COVER.html</title>
</head><body style='background-color: white; color: black'>
<pre>
File generated from /home/piotrek/Dokumenty/OneData/merge_merge/op-worker/ebin/../src/modules/http_worker/gui/session_logic.erl by COVER 2015-08-06 at 11:00:39

****************************************************************************

        |  %%%--------------------------------------------------------------------
        |  %%% @author Lukasz Opiola
        |  %%% @copyright (C) 2014 ACK CYFRONET AGH
        |  %%% This software is released under the MIT license
        |  %%% cited in 'LICENSE.txt'.
        |  %%% @end
        |  %%%--------------------------------------------------------------------
        |  %%% @doc This module implements session_logic_behaviour and exports an
        |  %%% API for persisting GUI sessions.
        |  %%% @end
        |  %%%--------------------------------------------------------------------
        |  -module(session_logic).
        |  -author("Lukasz Opiola").
        |  
        |  -behaviour(session_logic_behaviour).
        |  -include_lib("ctool/include/logging.hrl").
        |  
        |  %% session_logic_behaviour callbacks
        |  -export([init/0, cleanup/0]).
        |  -export([save_session/3, lookup_session/1, delete_session/1, clear_expired_sessions/0, get_cookie_ttl/0]).
        |  
        |  % Max number of old session cookies retrieved from view at once
        |  -define(cookie_lookup_limit, 100).
        |  
        |  %%%===================================================================
        |  %%% session_logic_behaviour callbacks
        |  %%%===================================================================
        |  
        |  %%--------------------------------------------------------------------
        |  %% @doc
        |  %% Initializes the session_logic module. Any setup such as ets creation
        |  %% should be performed in this function.
        |  %% @end
        |  %%--------------------------------------------------------------------
        |  -spec init() -&gt; ok.
        |  init() -&gt;
    30..|      ok.
        |  
        |  %%--------------------------------------------------------------------
        |  %% @doc
        |  %% Performs any cleanup, such as deleting the previously created ets tables.
        |  %% @end
        |  %%--------------------------------------------------------------------
        |  -spec cleanup() -&gt; ok.
        |  cleanup() -&gt;
    29..|      ok.
        |  
        |  %%--------------------------------------------------------------------
        |  %% @doc
        |  %% Saves session data under SessionID key (Props), the entry is valid up to given moment (Till).
        |  %% If Till arg is undefined, the one currently associated with SessionID will be used.
        |  %% If there is no record of session with id SessionID and Till is unspecified, exception will be thrown.
        |  %% Till is expressed in number of seconds since epoch.
        |  %% @end
        |  %%--------------------------------------------------------------------
        |  -spec save_session(SessionID :: binary(), Props :: [tuple()], ValidTill :: integer() | undefined) -&gt; ok | no_return().
        |  save_session(_SessionID, _Props, _TillArg) -&gt;
    84..|      ok.
        |  
        |  %%--------------------------------------------------------------------
        |  %% @doc
        |  %% Lookups a session by given SessionID key. On success, returns a proplist -
        |  %% session data, or undefined if given session does not exist.
        |  %% NOTE! If SessionID exists, but has expired, it should be automatically
        |  %% removed and undefined should be returned.
        |  %% @end
        |  %%--------------------------------------------------------------------
        |  -spec lookup_session(SessionID :: binary()) -&gt; Props :: [tuple()] | undefined.
        |  lookup_session(_SessionID) -&gt;
<font color=red>     0..|      [].</font>
        |  
        |  %%--------------------------------------------------------------------
        |  %% @doc
        |  %% Deletes a session by SessionID key.
        |  %% @end
        |  %%--------------------------------------------------------------------
        |  -spec delete_session(SessionID :: binary()) -&gt; ok.
        |  delete_session(_SessionID) -&gt;
    84..|      ok.
        |  
        |  %%--------------------------------------------------------------------
        |  %% @doc
        |  %% Deletes all sessions that have expired. Every session is saved
        |  %% with a ValidTill arg, that marks a point in time when it expires (in secs since epoch).
        |  %% The clearing should be performed based on this.
        |  %% @end
        |  %%--------------------------------------------------------------------
        |  -spec clear_expired_sessions() -&gt; non_neg_integer().
        |  clear_expired_sessions() -&gt;
<font color=red>     0..|      0.</font>
        |  
        |  %%--------------------------------------------------------------------
        |  %% @doc Returns cookies time to live in seconds.
        |  %% @end
        |  %%--------------------------------------------------------------------
        |  -spec get_cookie_ttl() -&gt; integer() | no_return().
        |  get_cookie_ttl() -&gt;
    84..|      0.
</pre>
</body>
</html>
