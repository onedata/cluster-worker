<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>/home/piotrek/Dokumenty/OneData/merge_merge/op-worker/test_coverage/n2o_handler.COVER.html</title>
</head><body style='background-color: white; color: black'>
<pre>
File generated from /home/piotrek/Dokumenty/OneData/merge_merge/op-worker/ebin/../src/modules/http_worker/gui/n2o_handler.erl by COVER 2015-08-06 at 11:00:46

****************************************************************************

        |  %%%--------------------------------------------------------------------
        |  %%% @author Lukasz Opiola
        |  %%% @copyright (C) 2014 ACK CYFRONET AGH
        |  %%% This software is released under the MIT license
        |  %%% cited in 'LICENSE.txt'.
        |  %%% @end
        |  %%%--------------------------------------------------------------------
        |  %%% @doc Copy of n2o_cowboy.erl from n2o.
        |  %%% This is a cowboy handler module for handling HTTP request with n2o engine.
        |  %%% Compared to original, this module has slight changes in the following functions:
        |  %%% - request_body/1
        |  %%% - reply/2
        |  %%% @end
        |  %%% @todo function headers
        |  %%%--------------------------------------------------------------------
        |  -module(n2o_handler).
        |  -author("Lukasz Opiola").
        |  
        |  -behaviour(cowboy_http_handler).
        |  
        |  % cowboy_http_handler callbacks
        |  -export([init/3, handle/2, terminate/3]).
        |  
        |  % Bridge abstraction
        |  -export([params/1, path/1, request_body/1, headers/1, header/3, response/2, reply/2]).
        |  -export([cookies/1, cookie/2, cookie/3, cookie/5, delete_cookie/2, peer/1]).
        |  
        |  % Handler state record
        |  -record(state, {headers, body}).
        |  
        |  %%%===================================================================
        |  %%% cowboy_http_handler callbacks
        |  %%%===================================================================
        |  init(_Transport, Req, _Opts) -&gt;
    84..|      {ok, Req, #state{}}.
        |  
        |  handle(Req, State) -&gt;
    84..|      {ok, NewReq} = wf_core:run(Req),
    84..|      {ok, NewReq, State}.
        |  
        |  terminate(_Reason, _Req, _State) -&gt;
    84..|      ok.
        |  
        |  %%%===================================================================
        |  %%% Cowboy Bridge Abstraction
        |  %%%===================================================================
        |  
    84..|  params(Req) -&gt; {Params, _NewReq} = cowboy_req:qs_vals(Req), Params.
    84..|  path(Req) -&gt; {Path, _NewReq} = cowboy_req:path(Req), Path.
<font color=red>     0..|  request_body(Req) -&gt; opn_cowboy_bridge:apply(cowboy_req, body, [Req]).</font>
<font color=red>     0..|  headers(Req) -&gt; cowboy_req:headers(Req).</font>
<font color=red>     0..|  header(Name, Value, Req) -&gt; cowboy_req:set_resp_header(Name, Value, Req).</font>
    84..|  response(Html, Req) -&gt; cowboy_req:set_resp_body(Html, Req).
    84..|  reply(StatusCode, Req) -&gt; opn_cowboy_bridge:apply(cowboy_req, reply, [StatusCode, Req]).
<font color=red>     0..|  cookies(Req) -&gt; element(1, cowboy_req:cookies(Req)).</font>
<font color=red>     0..|  cookie(Cookie, Req) -&gt; gui_ctx:cookie(gui_str:to_binary(Cookie), Req).  % cowboy_req:cookie has a bug</font>
<font color=red>     0..|  cookie(Cookie, Value, Req) -&gt; cookie(Cookie, Value, &lt;&lt;"/"&gt;&gt;, 0, Req).</font>
        |  cookie(Name, Value, Path, TTL, Req) -&gt;
<font color=red>     0..|      Options = [{path, Path}, {max_age, TTL}],</font>
<font color=red>     0..|      cowboy_req:set_resp_cookie(Name, Value, Options, Req).</font>
<font color=red>     0..|  delete_cookie(Cookie, Req) -&gt; cookie(Cookie, &lt;&lt;""&gt;&gt;, &lt;&lt;"/"&gt;&gt;, 0, Req).</font>
<font color=red>     0..|  peer(Req) -&gt; {{Ip, Port}, Req} = cowboy_req:peer(Req), {Ip, Port}.</font>
</pre>
</body>
</html>
