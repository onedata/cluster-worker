<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>/home/piotrek/Dokumenty/OneData/merge_merge/op-worker/test_coverage/fslogic_context.COVER.html</title>
</head><body style='background-color: white; color: black'>
<pre>
File generated from /home/piotrek/Dokumenty/OneData/merge_merge/op-worker/ebin/../src/modules/fslogic/fslogic_context.erl by COVER 2015-08-06 at 11:00:46

****************************************************************************

        |  %%%--------------------------------------------------------------------
        |  %%% @author Rafal Slota
        |  %%% @copyright (C) 2015 ACK CYFRONET AGH
        |  %%% This software is released under the MIT license
        |  %%% cited in 'LICENSE.txt'.
        |  %%% @end
        |  %%%--------------------------------------------------------------------
        |  %%% @doc This module provides and manages fslogic context information
        |  %%%      such user's credentials.
        |  %%% @end
        |  %%%--------------------------------------------------------------------
        |  -module(fslogic_context).
        |  -author("Rafal Slota").
        |  
        |  -include("modules/datastore/datastore.hrl").
        |  -include("modules/fslogic/fslogic_common.hrl").
        |  -include_lib("ctool/include/logging.hrl").
        |  
        |  %% API
        |  -export([gen_global_session_id/2, read_global_session_id/1, is_global_session_id/1]).
        |  -export([get_user_id/1]).
        |  
        |  %%%===================================================================
        |  %%% API functions
        |  %%%===================================================================
        |  
        |  
        |  %% gen_global_session_id/1
        |  %%-------------------------------------------------------------------- 
        |  %% @doc Converts given ProviderId and SessionId into GlobalSessionId that can be recognised by other providers.
        |  %% @end
        |  -spec gen_global_session_id(ProviderId :: iolist(), SessionId :: iolist()) -&gt; GlobalSessionId :: binary() | undefined.
        |  %%-------------------------------------------------------------------- 
        |  gen_global_session_id(_, undefined) -&gt;
     1..|      undefined;
        |  gen_global_session_id(ProviderId, SessionId) -&gt;
     5..|      ProviderId1 = utils:ensure_binary(ProviderId),
     5..|      SessionId1 = utils:ensure_binary(SessionId),
     5..|      &lt;&lt;ProviderId1/binary, "::", SessionId1/binary&gt;&gt;.
        |  
        |  
        |  %%--------------------------------------------------------------------
        |  %% @doc Converts given GlobalSessionId into ProviderId and SessionId. This method inverts gen_global_session_id/1.
        |  %%      Fails with exception if given argument has invalid format.
        |  %% @end
        |  %%--------------------------------------------------------------------
        |  -spec read_global_session_id(GlobalSessionId :: iolist()) -&gt; {ProviderId :: binary(), SessionId :: binary()} | no_return().
        |  read_global_session_id(GlobalSessionId) -&gt;
     6..|      GlobalSessionId1 = utils:ensure_binary(GlobalSessionId),
     6..|      [ProviderId, SessionId] = binary:split(GlobalSessionId1, &lt;&lt;"::"&gt;&gt;),
     4..|      {ProviderId, SessionId}.
        |  
        |  
        |  %%-------------------------------------------------------------------- 
        |  %% @doc Checks if given SessionId can be recognised by other providers (i.e. was generated by gen_global_session_id/1).
        |  %% @end
        |  %%-------------------------------------------------------------------- 
        |  -spec is_global_session_id(GlobalSessionId :: iolist()) -&gt; boolean().
        |  is_global_session_id(GlobalSessionId) -&gt;
     4..|      GlobalSessionId1 = utils:ensure_binary(GlobalSessionId),
     4..|      length(binary:split(GlobalSessionId1, &lt;&lt;"::"&gt;&gt;)) =:= 2.
        |  
        |  %%--------------------------------------------------------------------
        |  %% @doc Retrieves user ID from fslogic context.
        |  %% @end
        |  %%--------------------------------------------------------------------
        |  -spec get_user_id(Ctx :: fslogic_worker:ctx()) -&gt; UserId :: onedata_user:id().
        |  get_user_id(#fslogic_ctx{session = #session{identity = #identity{user_id = UserId}}}) -&gt;
  2553..|      UserId.</pre>
</body>
</html>
